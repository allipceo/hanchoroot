# 3단계 촌수계산 개발계획서

**프로젝트명**: 한양조씨 족보 MVP 앱  
**문서 유형**: 3단계 개발계획서  
**작성일**: 2025.09.13  
**작성자**: 서대리  
**승인**: 조대표 (대기중)  
**버전**: V1.0

---

## 📋 1. 문서 개요

### 1.1 작성 목적
3단계 "촌수 계산 기능 구현 및 관계 분석 시스템 개발"을 위한 상세한 계획서를 작성하여 체계적이고 효율적인 개발을 진행함.

### 1.2 개발 목표
**목표**: "촌수 계산 기능 구현 및 관계 분석 시스템 개발"  
**기반**: 1-2단계 완료된 메인 화면, 검색 시스템, 상세 정보 화면

---

## 🎯 2. 개발 목표 및 범위

### 2.1 핵심 목표
1. **촌수 계산 기능**: 두 인물 간의 촌수 및 관계 계산
2. **관계 분석 시스템**: 가족 관계 시각화 및 분석
3. **촌수 계산기 화면**: 직관적인 촌수 계산 인터페이스
4. **관계도 표시**: 가족 관계도 시각적 표시

### 2.2 개발 범위
- ✅ **포함**: 촌수 계산, 관계 분석, 계산기 화면, 관계도 표시
- ❌ **제외**: 패밀리별 보기 (4단계에서 구현)

---

## 🏗️ 3. 기술 아키텍처

### 3.1 1-2단계 기반 확장
```
1-2단계 완료 구조:
├── app/index.html (메인 화면)
├── app/search.html (검색 화면)
├── app/detail.html (상세 정보 화면)
├── css/style.css, search.css, detail.css
├── js/app.js, search.js, detail.js
└── data/core.js (Core Module)

3단계 추가 구조:
├── app/calculator.html (촌수 계산기 화면)
├── css/calculator.css (계산기 스타일)
├── js/calculator.js (촌수 계산 기능)
└── data/kinship.js (관계 데이터)
```

### 3.2 Lego Block 방식 적용
- **재사용**: 1-2단계 네비게이션, 데이터 구조, UI 컴포넌트
- **확장**: 촌수 계산 모듈 추가
- **통합**: 기존 구조와 완벽 연동

---

## 📊 4. 데이터 구조 설계

### 4.1 촌수 계산 데이터 구조
```javascript
const KINSHIP_DATA = {
  // 촌수 매트릭스 (사전 계산된 관계)
  kinshipMatrix: {
    "p_001_p_002": { // 조은상 - 조원상
      degree: 1, // 1촌
      relation: "형제",
      path: ["p_001", "p_003", "p_002"], // 공통 조상 경로
      honorific: "형님/동생"
    },
    "p_001_p_003": { // 조은상 - 조대하
      degree: 1, // 1촌
      relation: "부자",
      path: ["p_001", "p_003"],
      honorific: "아버지/아들"
    }
  },
  
  // 관계 계산 규칙
  kinshipRules: {
    "부자": { degree: 1, honorific: "아버지/아들" },
    "모자": { degree: 1, honorific: "어머니/아들" },
    "부녀": { degree: 1, honorific: "아버지/딸" },
    "모녀": { degree: 1, honorific: "어머니/딸" },
    "형제": { degree: 1, honorific: "형님/동생" },
    "자매": { degree: 1, honorific: "언니/동생" },
    "조부손": { degree: 2, honorific: "할아버지/손자" },
    "조모손": { degree: 2, honorific: "할머니/손자" }
  }
};
```

### 4.2 촌수 계산 결과 구조
```javascript
const CALCULATION_RESULT = {
  person1: {
    id: "p_001",
    name: "조은상"
  },
  person2: {
    id: "p_002", 
    name: "조원상"
  },
  relationship: {
    degree: 1,
    relation: "형제",
    honorific: "형님/동생",
    path: ["p_001", "p_003", "p_002"],
    commonAncestor: "p_003"
  },
  calculationTime: "2025-09-13T21:30:00Z"
};
```

---

## 🎨 5. UI/UX 설계

### 5.1 촌수 계산기 화면 구성 (L2-3: 촌수 계산기)
```
┌─────────────────────────┐
│ ← 한양조씨 족보         │ ← 헤더 (1단계 재사용)
├─────────────────────────┤
│ 🧮 촌수 계산기          │ ← 제목
│ 두 사람의 관계를 계산하세요 │
├─────────────────────────┤
│ 👤 첫 번째 사람         │ ← 첫 번째 인물 선택
│ [검색하여 선택하기]      │
│ ┌─────────────────────┐ │
│ │ 👤 조은상 (4세대)   │ │ ← 선택된 인물 표시
│ │ Line1 | 생존        │ │
│ └─────────────────────┘ │
├─────────────────────────┤
│ 👤 두 번째 사람         │ ← 두 번째 인물 선택
│ [검색하여 선택하기]      │
│ ┌─────────────────────┐ │
│ │ 👤 조원상 (4세대)   │ │ ← 선택된 인물 표시
│ │ Line1 | 생존        │ │
│ └─────────────────────┘ │
├─────────────────────────┤
│ [🧮 촌수 계산하기]      │ ← 계산 버튼
├─────────────────────────┤
│ 📊 계산 결과            │ ← 결과 영역
│ ┌─────────────────────┐ │
│ │ 조은상 ↔ 조원상     │ │
│ │ 1촌 형제 관계       │ │
│ │ 호칭: 형님/동생     │ │
│ │ 공통조상: 조대하    │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

### 5.2 관계도 표시 화면 (L3-2: 관계도)
```
┌─────────────────────────┐
│ ← 조은상 ↔ 조원상 관계도 │ ← 헤더
├─────────────────────────┤
│ 📊 관계 경로            │ ← 관계 경로 표시
│ 조은상 → 조대하 → 조원상 │
│    1촌    1촌          │
├─────────────────────────┤
│ 👨‍👩‍👧‍👦 가족 관계도      │ ← 시각적 관계도
│     조대하 (3세대)      │
│        ↙     ↘         │
│   조은상    조원상      │
│   (4세대)   (4세대)     │
├─────────────────────────┤
│ 📝 관계 설명            │ ← 상세 설명
│ • 조은상과 조원상은 형제 관계입니다
│ • 공통 조상: 조대하 (아버지)
│ • 호칭: 형님/동생
│ • 촌수: 1촌
└─────────────────────────┘
```

---

## 🔧 6. 개발 단계별 계획

### 6.1 3-1: 촌수 계산 데이터 구조 구현
**소요 시간**: 1시간  
**작업 내용**:
- 촌수 계산 데이터 구조 구현
- 관계 계산 규칙 정의
- 촌수 매트릭스 구조 구현
- 계산 결과 데이터 구조 구현

**완료 기준**:
- ✅ KinshipData 모듈 완성
- ✅ KinshipMatrix 모듈 완성
- ✅ KinshipRules 모듈 완성
- ✅ CalculationResult 모듈 완성

### 6.2 3-2: 촌수 계산기 화면 HTML/CSS 구현
**소요 시간**: 1.5시간  
**작업 내용**:
- 촌수 계산기 화면 HTML 구조 구현
- 계산기 전용 CSS 스타일링
- 반응형 디자인 적용
- 1-2단계 스타일과 일관성 유지

**완료 기준**:
- ✅ calculator.html 구조 완성
- ✅ calculator.css 스타일링 완성
- ✅ 모바일 최적화 완료
- ✅ 1-2단계와 일관된 디자인

### 6.3 3-3: 촌수 계산 알고리즘 구현
**소요 시간**: 2시간  
**작업 내용**:
- 촌수 계산 핵심 알고리즘 구현
- 관계 경로 탐색 함수
- 호칭 계산 함수
- 공통 조상 찾기 함수

**완료 기준**:
- ✅ 촌수 계산 알고리즘 구현
- ✅ 관계 경로 탐색 함수 완성
- ✅ 호칭 계산 함수 완성
- ✅ 공통 조상 찾기 함수 완성

### 6.4 3-4: 계산기 기능 JavaScript 구현
**소요 시간**: 1.5시간  
**작업 내용**:
- 인물 선택 기능 구현
- 계산 실행 함수
- 결과 표시 함수
- 에러 처리 함수

**완료 기준**:
- ✅ 인물 선택 기능 완성
- ✅ 계산 실행 함수 완성
- ✅ 결과 표시 함수 완성
- ✅ 에러 처리 함수 완성

### 6.5 3-5: 관계도 표시 구현
**소요 시간**: 2시간  
**작업 내용**:
- 관계도 시각화 함수
- 관계 경로 표시
- 가족 관계도 렌더링
- 상세 설명 표시

**완료 기준**:
- ✅ 관계도 시각화 함수 완성
- ✅ 관계 경로 표시 완성
- ✅ 가족 관계도 렌더링 완성
- ✅ 상세 설명 표시 완성

### 6.6 3-6: 네비게이션 연동 구현
**소요 시간**: 1시간  
**작업 내용**:
- 1-2단계 네비게이션과 연동
- 화면 간 이동 처리
- 뒤로가기 기능
- 브레드크럼 네비게이션

**완료 기준**:
- ✅ 1-2단계 네비게이션 연동 완성
- ✅ 화면 간 이동 처리 완성
- ✅ 뒤로가기 기능 완성
- ✅ 브레드크럼 네비게이션 완성

### 6.7 3-7: 통합 테스트 및 검증
**소요 시간**: 1.5시간  
**작업 내용**:
- 전체 촌수 계산 기능 통합 테스트
- 시뮬레이션 테스트
- 실제 데이터 테스트
- 디버깅 및 최적화
- 문서화

**완료 기준**:
- ✅ 전체 기능 통합 테스트 완료
- ✅ 시뮬레이션 테스트 완료
- ✅ 실제 데이터 테스트 완료
- ✅ 디버깅 완료
- ✅ 문서화 완료

---

## 🧪 7. 시뮬레이션 계획

### 7.1 시뮬레이션 시나리오
1. **촌수 계산기 진입**: 메인 화면에서 "촌수 계산기" 클릭
2. **인물 선택**: 두 명의 인물 선택 (조은상, 조원상)
3. **촌수 계산**: 계산 버튼 클릭하여 관계 계산
4. **결과 확인**: 촌수, 관계, 호칭, 공통 조상 확인
5. **관계도 표시**: 관계도 화면에서 시각적 확인

### 7.2 시뮬레이션 도구
- **브라우저**: Chrome, Firefox, Safari
- **모바일 시뮬레이션**: Chrome DevTools
- **성능 측정**: Lighthouse
- **접근성 테스트**: 기본 접근성 준수

---

## ✅ 8. 검증 계획

### 8.1 기능 검증
- [ ] 촌수 계산 정확성
- [ ] 관계 분석 정확성
- [ ] 호칭 계산 정확성
- [ ] 관계도 표시 정확성
- [ ] 네비게이션 정상 동작

### 8.2 성능 검증
- [ ] 계산 응답 시간 < 1초
- [ ] 메모리 사용량 < 150MB
- [ ] 모바일 반응성 확인
- [ ] 터치 영역 44px 이상

### 8.3 호환성 검증
- [ ] Chrome 최신 버전
- [ ] Firefox 최신 버전
- [ ] Safari 최신 버전
- [ ] 모바일 브라우저

---

## 📊 9. 실제 데이터 테스트

### 9.1 테스트 데이터
**기존 5명 인물 데이터 활용**:
- 조은상 (4세대, Line1, 생존)
- 조원상 (4세대, Line1, 생존)
- 조대하 (3세대, Line1, 고인)
- 조광희 (3세대, Line1, 고인)
- 조영희 (2세대, Line1, 고인)

### 9.2 테스트 시나리오
1. **형제 관계**: 조은상 ↔ 조원상 (1촌 형제)
2. **부자 관계**: 조은상 ↔ 조대하 (1촌 부자)
3. **조부손 관계**: 조은상 ↔ 조영희 (2촌 조부손)
4. **복잡한 관계**: 다양한 촌수 관계 테스트
5. **에러 처리**: 존재하지 않는 인물 관계 테스트

---

## 🐛 10. 디버깅 계획

### 10.1 예상 문제점
1. **촌수 계산**: 복잡한 관계 경로 탐색
2. **성능**: 대량 데이터에서의 계산 속도
3. **UI**: 관계도 시각화 표시
4. **네비게이션**: 화면 간 데이터 전달

### 10.2 디버깅 도구
- **브라우저 개발자 도구**: Console, Network, Performance
- **계산 로그**: 촌수 계산 과정 로깅
- **성능 모니터링**: 메모리 및 CPU 사용량

---

## 📝 11. 문서화 계획

### 11.1 개발 과정 문서화
- 각 단계별 상세 작업 기록
- 시뮬레이션 결과 분석
- 디버깅 과정 및 해결 방법
- 성과 지표 및 개선 사항

### 11.2 완료 보고서
- `3-2_3단계_경과및결과보고서.md` 작성
- 1-2단계와 동일한 형식
- 다음 단계 준비 사항 포함

---

## 📋 12. 승인 및 다음 단계

### 12.1 승인 대기 사항
- [ ] **조대표님 3단계 개발계획서 승인** (필수)
- [ ] **3단계 개발 시작 승인**

### 12.2 승인 후 다음 단계
1. **3-1: 촌수 계산 데이터 구조 구현** 시작
2. **단계별 개발 진행** (3-1 → 3-7)
3. **통합 테스트 및 검증**
4. **완료 보고서 작성**

---

## 🎯 13. 성공 기준

### 13.1 최소 성공 기준
- ✅ 촌수 계산 정상 동작
- ✅ 관계 분석 정확한 표시
- ✅ 관계도 정확한 표시
- ✅ 네비게이션 정상 동작

### 13.2 완전 성공 기준
- ✅ 최소 성공 기준 달성
- ✅ 성능 최적화 완료
- ✅ 사용자 경험 최적화
- ✅ 문서화 완료

---

**문서 버전**: V1.0  
**최종 업데이트**: 2025.09.13 21:45  
**다음 업데이트**: 조대표님 승인 후 3단계 개발 시작

---

**조대표님의 3단계 개발계획서 승인을 기다립니다.**
