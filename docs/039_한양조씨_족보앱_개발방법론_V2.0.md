# 한양조씨 족보앱 개발방법론 V2.0

## 📋 문서 개요

**문서명**: 한양조씨 족보앱 개발방법론 V2.0  
**작성일**: 2025년 1월 17일  
**작성자**: 서대리  
**승인**: 조대표  
**버전**: V2.0  
**적용범위**: 향후 모든 브랜치 및 개발 작업

---

## 🚨 V1.0에서 발생한 핵심 이슈들

### **이슈 1: 테스트 코드 vs 실제 코드 불일치**
**문제**: 테스트 코드는 완벽 작동하지만 실제 프로그램에서는 오류 발생
**원인**: 
- 테스트 환경과 실제 환경의 데이터 접근 방식 차이
- 부분적 수정으로 인한 시스템 전체 불일치
- AI의 개별 문제 해결 vs 시스템 통합 사고 부족

### **이슈 2: 모듈 독립성 vs 데이터 무결성 충돌**
**문제**: 레고블록 이론(모듈 독립성)과 데이터 무결성(원소스 멀티유즈) 간 충돌
**원인**:
- 각 모듈이 독립 데이터를 사용하면서 데이터 중복 발생
- 데이터 수정 시 여러 파일 동시 업데이트 필요
- 모듈 간 데이터 불일치 위험

### **이슈 3: 로컬 환경 vs 배포 환경 불일치**
**문제**: 로컬 Node.js 환경에서만 작동하는 코드
**원인**:
- `require()`, `fs` 등 Node.js 모듈 사용
- GitHub Pages(브라우저만 지원) 배포 불가
- 테스트 환경과 실제 배포 환경 차이

---

## 🎯 V2.0 핵심 원칙

### **원칙 1: 환경 통일성 (Environment Consistency)**
- **모든 코드는 브라우저 환경에서 작동**해야 함
- **Node.js 의존성 완전 제거**
- **GitHub Pages 배포 환경 기준**으로 개발

### **원칙 2: 점진적 통합 (Progressive Integration)**
- **작동하는 기능은 절대 건드리지 않음**
- **문제가 있는 기능만 수정**
- **전체 시스템 수정보다 부분 수정 우선**

### **원칙 3: 데이터 접근 표준화 (Data Access Standardization)**
- **모든 모듈이 동일한 방식으로 데이터 접근**
- **`window.CORE_DATA` 표준 사용**
- **모듈별 독립 데이터 사용 금지**

### **원칙 4: 테스트 우선 개발 (Test-First Development)**
- **실제 프로그램에서 테스트**
- **테스트 코드와 실제 코드 동일한 환경**
- **GitHub Pages에서 직접 테스트**

---

## 🏗️ V2.0 기술적 적용 구조

### **데이터 구조**
```
공통 데이터
├── data_browser.js (중앙 데이터)
├── window.CORE_DATA (전역 접근)
└── 모든 모듈이 동일한 데이터 사용
```

### **모듈 구조**
```
모듈 A (패밀리별 보기)
├── family.html
├── family.js
└── window.CORE_DATA 접근

모듈 B (검색 기능)
├── search.html
├── search.js
├── detail.html
├── detail.js
└── window.CORE_DATA 접근

모듈 C (촌수 계산)
├── calculator.html
├── calculator.js
└── window.CORE_DATA 접근
```

### **파일 구조**
```
app/
├── index.html (core_browser.js 사용)
├── search.html (core_browser.js 사용)
├── detail.html (core_browser.js 사용)
├── family.html (family_data_browser.js 사용)
└── calculator.html (core_browser.js 사용)

js/
├── app.js (window.CORE_DATA 사용)
├── search.js (window.CORE_DATA 사용)
├── detail.js (window.CORE_DATA 사용)
├── family.js (FAMILY_DATA_BROWSER 사용)
└── calculator.js (window.CORE_DATA 사용)

data/
├── core_browser.js (중앙 데이터)
├── family_data_browser.js (패밀리 전용)
└── converted_complete_data_final.json (원본)
```

---

## 🔄 V2.0 개발 프로세스

### **1단계: 환경 확인**
- [ ] 브라우저 환경에서 작동하는지 확인
- [ ] Node.js 의존성 제거 확인
- [ ] GitHub Pages 배포 가능성 확인

### **2단계: 기존 기능 보호**
- [ ] 작동하는 기능 목록 작성
- [ ] 수정 대상 기능만 식별
- [ ] 기존 기능 영향도 분석

### **3단계: 점진적 수정**
- [ ] 문제가 있는 기능만 수정
- [ ] `window.CORE_DATA` 표준 사용
- [ ] 기존 파일명 최대한 유지

### **4단계: 통합 테스트**
- [ ] 실제 프로그램에서 테스트
- [ ] 모든 모듈 정상 작동 확인
- [ ] GitHub Pages 배포 테스트

---

## 🚫 V2.0 금지 사항

### **절대 금지**
- ❌ **Node.js 모듈 사용** (`require`, `fs`, `path` 등)
- ❌ **작동하는 기능 수정**
- ❌ **모듈별 독립 데이터 생성**
- ❌ **전체 시스템 동시 수정**

### **주의 사항**
- ⚠️ **테스트 코드와 실제 코드 환경 차이**
- ⚠️ **부분 수정으로 인한 시스템 불일치**
- ⚠️ **데이터 중복으로 인한 무결성 문제**

---

## 🔄 향후 브랜치 개발 시 체크리스트

### **브랜치 시작 전**
- [ ] V2.0 방법론 검토
- [ ] 기존 작동 기능 목록 확인
- [ ] 수정 대상 기능 식별
- [ ] 환경 통일성 확인

### **개발 중**
- [ ] 점진적 수정 원칙 준수
- [ ] `window.CORE_DATA` 표준 사용
- [ ] 기존 기능 영향도 모니터링
- [ ] 실제 프로그램에서 테스트

### **브랜치 완료 전**
- [ ] 모든 모듈 정상 작동 확인
- [ ] GitHub Pages 배포 테스트
- [ ] 데이터 무결성 검증
- [ ] V2.0 방법론 준수 확인

---

## 📚 V2.0 핵심 교훈

### **성공 요인**
1. **환경 통일성**: 브라우저 환경 기준 개발
2. **점진적 통합**: 작동하는 기능 보호
3. **데이터 표준화**: `window.CORE_DATA` 통일 사용
4. **실제 환경 테스트**: GitHub Pages에서 직접 테스트

### **실패 요인**
1. **환경 불일치**: 테스트 vs 실제 환경 차이
2. **전체 수정**: 작동하는 기능까지 수정
3. **데이터 분산**: 모듈별 독립 데이터 사용
4. **가상 테스트**: 실제 환경과 다른 테스트

---

## 🎯 V2.0 적용 결과

### **달성 목표**
- ✅ **모든 기능 정상 작동**
- ✅ **GitHub Pages 배포 가능**
- ✅ **데이터 무결성 보장**
- ✅ **모듈 독립성 유지**

### **향후 방향**
- 🔄 **새로운 브랜치마다 V2.0 방법론 적용**
- 🔄 **지속적인 방법론 개선**
- 🔄 **실제 환경 중심 개발**

---

## 📝 V2.0 방법론 적용 사례

### **사례 1: 검색 기능 수정 (2025.01.17)**
**문제**: 테스트 코드는 작동하지만 실제 프로그램에서 오류
**해결**: 
- `core.js` → `core_browser.js`로 변경
- `window.CORE_DATA` 표준 사용
- 패밀리별 보기 기능 보호

**결과**: ✅ 검색 기능 정상 작동, 패밀리별 보기 영향 없음

### **사례 2: 상세정보 기능 수정 (2025.01.17)**
**문제**: 검색에서 상세정보로 이동 시 오류
**해결**:
- `js/detail.js`에서 `window.CORE_DATA` 사용
- `app/detail.html`에서 `core_browser.js` 사용

**결과**: ✅ 검색 → 상세정보 연결 정상 작동

---

## 🚀 V2.0 방법론의 핵심 가치

### **1. 안전성 (Safety)**
- 작동하는 기능을 보호하면서 문제 해결
- 위험 최소화를 통한 안정적 개발

### **2. 효율성 (Efficiency)**
- 점진적 수정으로 빠른 문제 해결
- 불필요한 전체 수정 방지

### **3. 일관성 (Consistency)**
- 모든 모듈이 동일한 방식으로 데이터 접근
- 환경 통일성을 통한 예측 가능한 동작

### **4. 확장성 (Scalability)**
- 새로운 모듈 추가 시 기존 방법론 적용
- 지속적인 개발 방법론 개선

---

**이 V2.0 방법론은 향후 모든 개발의 핵심 원칙이 되며, 새로운 브랜치를 열 때마다 반드시 검토하고 적용해야 합니다.** 🚀

---

**문서 작성 완료일**: 2025년 1월 17일  
**다음 검토 예정일**: 새로운 브랜치 시작 시  
**관련 문서**: 038_프로그램 접속방법.md, 037_4-1단계_패밀리별보기_개발경과및결과보고서.md
