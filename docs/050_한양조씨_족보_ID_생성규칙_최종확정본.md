# 한양조씨 족보 ID 생성 규칙 최종 확정본

**작성일**: 2025.01.14 18:00 KST  
**작성자**: 서대리 (Cursor AI)  
**승인자**: 조대표님  
**목적**: 각 개인을 유일무이하게 식별하는 ID 체계 확정

## 📋 ID 생성 규칙 개요

### **핵심 원칙**
- **간단함**: 복잡한 로직 없이 직관적
- **일관성**: 모든 구성원에 동일한 원칙 적용
- **확장성**: 신규 구성원 추가 시 자동 적용
- **가독성**: ID만 봐도 기본 정보 파악 가능
- **유일성**: 각 개인을 고유하게 식별

### **ID 형식**
```
L1-G3-M-S-001
```

## 🔧 ID 구성 요소 상세

### **1. Line 코드 (L1, L2, L3)**
- **L1**: Line1 (1세대 조정윤 계열)
- **L2**: Line2 (2세대 분파)
- **L3**: Line3 (2세대 분파)
- **확장성**: 향후 L4, L5 등으로 확장 가능

### **2. 세대 코드 (G1, G2, G3...)**
- **G1**: 1세대 (조정윤)
- **G2**: 2세대 (조병희 등)
- **G3**: 3세대 (조대하 등)
- **G4**: 4세대 (조은상 등)
- **G5**: 5세대 (조광희 등)
- **G6**: 6세대 (조수정 등)
- **확장성**: G7, G8 등으로 확장 가능

### **3. 성별 코드 (M, F)**
- **M**: 남성
- **F**: 여성

### **4. 관계 코드 (S, D, H, W)**
- **S**: 아들 (조씨 남성)
- **D**: 딸 (조씨 여성)
- **H**: 남편 (조씨 여성의 배우자)
- **W**: 부인 (조씨 남성의 배우자)

### **5. 순번 (001, 002, 003...)**
- **001**: 해당 Line-세대-성별-관계 내에서 1번
- **002**: 해당 Line-세대-성별-관계 내에서 2번
- **확장성**: 999까지 확장 가능

## 📝 ID 생성 예시

### **1세대 (조정윤 계열)**
```
L1-G1-M-S-001: 조정윤 (Line1, 1세대, 남자, 아들, 1번)
L1-G1-F-W-001: 임정숙 (Line1, 1세대, 여자, 부인, 1번)
L1-G1-F-W-002: 이천경 (Line1, 1세대, 여자, 부인, 2번)
```

### **3세대 (조대하 계열)**
```
L1-G3-M-S-001: 조대하 (Line1, 3세대, 남자, 아들, 1번)
L1-G3-F-W-001: 허효순 (Line1, 3세대, 여자, 부인, 1번)
```

### **4세대 (조은상 계열)**
```
L1-G4-M-S-001: 조은상 (Line1, 4세대, 남자, 아들, 1번)
L1-G4-F-W-001: 변주란 (Line1, 4세대, 여자, 부인, 1번)
```

### **5세대 (조광희 계열)**
```
L1-G5-M-S-001: 조광희 (Line1, 5세대, 남자, 아들, 1번)
L1-G5-F-D-001: 조수정 (Line1, 5세대, 여자, 딸, 1번)
```

## 🔗 부부 관계 매칭 규칙

### **매칭 원칙**
- **같은 순번**: 부부는 같은 순번을 가짐
- **다른 관계 코드**: 조씨는 S/D, 배우자는 W/H
- **같은 Line-세대**: 부부는 같은 Line과 세대

### **매칭 예시**
```
L1-G3-M-S-001: 조대하 (조씨 남성)
L1-G3-F-W-001: 허효순 (배우자 부인)
→ 같은 순번(001)으로 부부 관계 표시
```

## 🚀 구현 방안

### **1단계: 기존 152명에 ID 부여**
- 현재 데이터 구조는 그대로 유지
- ID 필드만 추가하여 유일무이한 식별자 부여
- 기존 애플리케이션은 영향 없음

### **2단계: ID 생성 함수 구현**
```javascript
function generateId(person) {
    const lineCode = person.Line1 === 'Line1' ? 'L1' : 
                    person.Line1 === 'Line2' ? 'L2' : 'L3';
    const genCode = `G${person.세대}`;
    const genderCode = person.성별 === 'M' ? 'M' : 'F';
    const relationCode = determineRelation(person);
    const sequence = generateSequence(lineCode, genCode, genderCode, relationCode);
    
    return `${lineCode}-${genCode}-${genderCode}-${relationCode}-${sequence}`;
}
```

### **3단계: 신규 구성원 자동 ID 부여**
- 신규 구성원 추가 시 규칙에 따라 자동 ID 생성
- 부부 관계 자동 매칭
- 순번 자동 증가

## 📊 현재 시스템과의 호환성

### **기존 필드 매핑**
- `Line1` → `L1`
- `Line2` → `L2`
- `Line3` → `L3`
- `세대` → `G1, G2, G3...`
- `성별` → `M, F`
- `관계` → `S, D, H, W`

### **기존 애플리케이션 영향**
- **영향 없음**: 기존 필드들은 그대로 유지
- **ID 추가**: 새로운 식별자로 활용
- **점진적 활용**: 필요에 따라 ID 활용 확대

## 🎯 향후 활용 방안

### **1. 관계형 데이터베이스**
- 각 개인을 고유하게 식별
- 부모-자녀 관계, 부부 관계 명확화
- 복잡한 쿼리 지원

### **2. 롤업 기능**
- 세대별 통계
- Line별 통계
- 관계별 통계

### **3. 검색 및 필터링**
- ID로 정확한 개인 식별
- Line별, 세대별, 관계별 필터링
- 부부 관계 자동 매칭

## ✅ 승인 및 적용

### **승인자**: 조대표님
### **승인일**: 2025.01.14
### **적용 예정**: 다음 개발 단계에서 구현

### **구현 우선순위**
1. **기존 152명에 ID 부여** (최우선)
2. **ID 생성 함수 구현**
3. **신규 구성원 자동 ID 부여**
4. **애플리케이션에서 ID 활용**

---

## 📋 요약

**ID 형식**: `L1-G3-M-S-001`
- **L1**: Line1
- **G3**: 3세대
- **M**: 남성
- **S**: 아들
- **001**: 순번

**핵심 장점**:
- 간단하면서도 체계적
- 부부 관계 명확히 표시
- 향후 확장성 우수
- 기존 시스템과 완벽 호환

**조대표님 원칙 준수**:
- ✅ 간단함
- ✅ 단단함
- ✅ 믿음직함
