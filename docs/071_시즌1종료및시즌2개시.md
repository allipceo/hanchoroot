powershell -NoProfile -Command "New-Item -ItemType File -Path 'docs/061_시즌1_종료_시즌2_개발환경_운영정책.md' -Force | Out-Null; Set-Content -Path 'docs/061_시즌1_종료_시즌2_개발환경_운영정책.md' -Value '# 한양조씨 족보앱 시즌1 종료 · 시즌2 개발/배포 운영정책

작성일: 2025-09-19
담당: 서대리

## 1) 목표와 원칙
- 시즌1(배포판) 안정화/동결, 제한적 핫픽스만 허용
- 시즌2(개발판) 로컬 중심 개발, 마일스톤 단위로만 원격 백업/배포
- GitHub Pages 배포는 시즌1 브랜치에서만 수행

## 2) 브랜치/태그 전략
- 배포 브랜치: `deploy/working` (GitHub Pages Source)
- 시즌1 릴리스 태그: `season1.0`, 필요 시 `season1.1`, `season1.2` …
- 시즌2 개발 브랜치(예시): `season2/dev`

명령 예시:
```
# 시즌1 기준에서 태그
git checkout deploy/working
git tag season1.0 -m "Season 1 release"
git push origin deploy/working --tags

# 시즌2 개발 분기
git checkout -b season2/dev
```

## 3) 배포 정책(GitHub Pages)
- Pages Source: Branch = `deploy/working`, Folder = `/ (root)`
- 배포는 PR(merge)로만 진행. 보호 규칙 권장(직접 푸시 금지)
- 반영 지연: 최초 1–5분(캐시) 고려, 실패 시 Actions 로그 확인

## 4) 작업 흐름(권장)
1. 로컬 개발: `season2/dev`에서 기능 구현/테스트
2. 로컬 웹 서버 테스트: `python -m http.server 8000`
   - 모바일 동시 테스트: 휴대폰에서 `http://PC_IP:8000` 접속
3. 마일스톤 도달 시 원격 백업: `git push -u origin season2/dev`
4. 배포 준비:
   - PR: `season2/dev` → `deploy/working`
   - 코드 리뷰/테스트 후 머지 → Pages 자동 배포

## 5) 핫픽스 절차(시즌1)
- 영향 긴급/치명 버그만 허용
- 작업 브랜치: `hotfix/<이슈키>`
- PR: `hotfix/*` → `deploy/working` (리뷰 후 즉시 배포)

## 6) 보안/비밀키
- `.env`는 절대 커밋 금지, 로컬/배포 서버에만 저장
- 문서/로그/스크린샷에 키 마스킹

## 7) 백업/아카이브
- 주요 마일스톤에 태그 추가: `season2.m1`, `season2.m2` …
- 대규모 변경 전 `__premerge_archive__/` 또는 태그로 스냅샷 보존

## 8) 체크리스트
- [ ] `deploy/working` 최신 정상 동작 확인
- [ ] `season1.0` 태그 생성/푸시 완료
- [ ] `season2/dev` 분기 생성 완료
- [ ] Pages Source 가 `deploy/working / (root)`로 유지되는지 확인
- [ ] 로컬 테스트 경로/모바일 접속 확인

## 9) 문제 해결 가이드
- 404/스타일 깨짐: 배포 지연 및 캐시(Shift+F5) 확인 → Actions 로그 점검
- 데이터 표준: `window.CORE_DATA` 단일 소스 유지, 브라우저 스크립트만 사용
- 롤백: `deploy/working`을 이전 `season1.x` 태그로 리셋 후 재배포

## 10) 운영 메모
- 잦은 푸시는 생략하고, 로컬 커밋만 누적 → 하루/마일스톤 단위 푸시
- PR 템플릿: 변경 요약, 영향 범위, 테스트 결과(모바일/데스크탑 스크린샷)'