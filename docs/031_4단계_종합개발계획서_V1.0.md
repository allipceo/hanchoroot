# 4단계 종합 개발계획서 V1.0

**프로젝트명**: 한양조씨 족보 MVP 앱  
**문서 유형**: 4단계 종합 개발계획서  
**작성일**: 2025년 1월 13일  
**작성자**: 서대리  
**승인**: 조대표 (대기중)  
**버전**: V1.0

---

## 📋 **문서 개요**

### **작성 목적**
3-3단계에서 완성된 실제 노션 데이터 100명을 활용하여 **4단계 패밀리별 보기 기능**을 체계적으로 구현하기 위한 종합 개발계획서를 작성합니다.

### **기반 현황**
- ✅ **1-3단계 완료**: 메인 화면, 검색, 상세 정보, 촌수 계산
- ✅ **3-3단계 완료**: 노션 데이터 100명 → JSON 변환 완료
- ✅ **실제 데이터 준비**: 100명 인물 정보, 검색 인덱스, 관계 데이터
- 🎯 **4단계 목표**: 패밀리별 보기 기능 구현

### **핵심 가치**
- **실용성 우선**: 당장 사용 가능한 기능 구현
- **기존 구조 활용**: 1-3단계 구조 최대 재활용
- **실제 데이터 기반**: 100명 실제 노션 데이터 활용
- **모바일 최적화**: 터치 친화적 인터페이스

---

## 🎯 **4단계 개발 목표**

### **핵심 목표**
**"Line별, 세대별로 가족 구성원을 분류하여 표시하는 패밀리별 보기 기능 구현"**

### **구체적 목표**
1. **Line별 분류 표시**: Line1, Line2, Line3별 가족 구성원 분류
2. **세대별 필터링**: 0세대, 4세대, 5세대, 6세대별 필터링
3. **가족 트리 시각화**: 계층 구조로 가족 관계 표시
4. **상태별 구분**: 생존(💚), 고인(🙏), 미확인(❓) 아이콘 표시
5. **터치 인터랙션**: 인물 클릭 시 상세 정보 이동

### **성공 기준**
- ✅ Line별 탭으로 가족 구성원 분류 표시
- ✅ 세대별 필터로 인물 필터링
- ✅ 상태별 아이콘으로 생존/고인/미확인 구분
- ✅ 인물 클릭 시 상세 정보 화면 이동
- ✅ 실제 데이터 100명 모두 정상 표시
- ✅ 페이지 로딩 시간 2초 이내
- ✅ 모바일에서 부드러운 스크롤

---

## 📊 **현재 데이터 현황 분석**

### **3-3단계 완성 데이터**
```javascript
// data/core.js - 실제 데이터 구조
const familyData = {
  persons: [
    // 100명 실제 인물 데이터
    {
      id: "G5M001S",
      name: "조세희",
      generation: 5,
      line: "Line1",
      status: "living",
      relationships: {
        father: "조영하",
        mother: null
      }
      // ... 기타 정보
    }
  ],
  searchIndex: {
    byLine: { "Line1": [100명] },
    byGeneration: { "0": [2명], "4": [17명], "5": [76명], "6": [5명] },
    byStatus: { "living": [100명] }
  }
};
```

### **데이터 분포 현황**
- **총 인물 수**: 100명
- **Line별 분포**: Line1(100명) - 현재 Line1만 데이터 존재
- **세대별 분포**: 0세대(2명), 4세대(17명), 5세대(76명), 6세대(5명)
- **상태별 분포**: 생존(100명) - 모두 생존 상태
- **관계 데이터**: 아버지 정보(81명), 어머니 정보(81명), 배우자 정보(45명)

---

## 🏗️ **4단계 기술 아키텍처**

### **기존 구조 활용**
```
1-3단계 완료 구조:
├── app/
│   ├── index.html (메인 화면)
│   ├── search.html (검색 화면)
│   ├── detail.html (상세 정보 화면)
│   └── calculator.html (촌수 계산기)
├── css/
│   ├── style.css (공통 스타일)
│   ├── search.css, detail.css, calculator.css
├── js/
│   ├── app.js (메인 로직)
│   ├── search.js, detail.js, calculator.js
└── data/
    └── core.js (Core Module - 100명 실제 데이터)

4단계 추가 구조:
├── app/
│   └── family.html (패밀리별 보기 화면) ← 신규
├── css/
│   └── family.css (패밀리별 보기 스타일) ← 신규
└── js/
    └── family.js (패밀리별 보기 로직) ← 신규
```

### **Lego Block 방식 적용**
- **재사용**: 1-3단계 네비게이션, 데이터 구조, UI 컴포넌트
- **확장**: 패밀리별 보기 모듈 추가
- **통합**: 기존 구조와 완벽 연동

---

## 🔧 **4단계 상세 개발 계획**

### **4-1: 패밀리별 보기 화면 설계** (1시간)
**목표**: 패밀리별 보기 화면의 HTML 구조 및 CSS 스타일링

**작업 내용**:
- `app/family.html` 생성 - 패밀리별 보기 화면
- `css/family.css` 생성 - 패밀리별 보기 전용 스타일
- Line 탭, 세대 필터, 가족 트리 UI 컴포넌트 구현
- 모바일 최적화 반응형 레이아웃

**핵심 구현**:
```html
<!-- app/family.html -->
<div class="line-tabs">
    <button class="tab-button active" data-line="Line1">Line1</button>
    <button class="tab-button" data-line="Line2">Line2</button>
    <button class="tab-button" data-line="Line3">Line3</button>
</div>

<div class="generation-filters">
    <button class="filter-button active" data-generation="all">전체</button>
    <button class="filter-button" data-generation="0">0세대</button>
    <button class="filter-button" data-generation="4">4세대</button>
    <button class="filter-button" data-generation="5">5세대</button>
    <button class="filter-button" data-generation="6">6세대</button>
</div>

<div class="family-tree">
    <div id="familyList" class="family-list">
        <!-- 가족 트리 내용이 여기에 동적으로 생성됩니다 -->
    </div>
</div>
```

**완료 기준**:
- ✅ HTML 구조 완성
- ✅ CSS 스타일링 완성 (모바일 최적화)
- ✅ UI 컴포넌트 구현
- ✅ 반응형 레이아웃 적용

---

### **4-2: 데이터 필터링 로직 구현** (1시간 30분)
**목표**: Line별, 세대별 필터링 로직 및 가족 트리 렌더링

**작업 내용**:
- `js/family.js` 생성 - 패밀리별 보기 로직
- Line별, 세대별 필터링 함수 구현
- 가족 트리 렌더링 함수 구현
- 상태별 아이콘 표시 로직

**핵심 구현**:
```javascript
// js/family.js
let familyData = null;
let currentLine = 'Line1';
let currentGeneration = 'all';

function getFilteredPersons() {
    let persons = familyData.persons;
    
    // Line별 필터링
    if (currentLine !== 'all') {
        persons = persons.filter(person => person.line === currentLine);
    }
    
    // 세대별 필터링
    if (currentGeneration !== 'all') {
        const generation = parseInt(currentGeneration);
        persons = persons.filter(person => person.generation === generation);
    }
    
    return persons;
}

function renderFamilyTree() {
    const familyList = document.getElementById('familyList');
    const filteredPersons = getFilteredPersons();
    
    // 세대별로 그룹화하여 렌더링
    const groupedByGeneration = groupByGeneration(filteredPersons);
    // ... 렌더링 로직
}
```

**완료 기준**:
- ✅ Line별 필터링 로직 구현
- ✅ 세대별 필터링 로직 구현
- ✅ 가족 트리 렌더링 구현
- ✅ 상태별 아이콘 표시 구현

---

### **4-3: 가족 트리 시각화** (1시간 30분)
**목표**: 계층 구조 표시 및 터치 인터랙션 구현

**작업 내용**:
- 계층 구조 시각적 표시 (들여쓰기, 연결선)
- 상태별 아이콘 및 배지 구현
- 터치 인터랙션 (인물 클릭 시 상세 정보 이동)
- 성능 최적화 (캐싱, 지연 로딩)

**핵심 구현**:
```javascript
function createFamilyMemberElement(person) {
    const memberElement = document.createElement('div');
    memberElement.className = 'family-member';
    memberElement.onclick = () => showPersonDetail(person.id);
    
    const statusIcon = getStatusIcon(person.status);
    const generationBadge = `${person.generation}세대`;
    
    memberElement.innerHTML = `
        <span class="status-icon">${statusIcon}</span>
        <div class="member-info">
            <div class="member-name">${person.name}</div>
            <div class="member-details">${person.line} | ${person.relationships.father ? `아버지: ${person.relationships.father}` : '아버지 정보 없음'}</div>
        </div>
        <span class="generation-badge">${generationBadge}</span>
    `;
    
    return memberElement;
}

function getStatusIcon(status) {
    switch(status) {
        case 'living': return '💚';
        case 'deceased': return '🙏';
        case 'unknown': return '❓';
        default: return '❓';
    }
}
```

**완료 기준**:
- ✅ 계층 구조 시각적 표시
- ✅ 상태별 아이콘 및 배지 구현
- ✅ 터치 인터랙션 구현
- ✅ 성능 최적화 적용

---

### **4-4: 통합 테스트 및 최적화** (1시간)
**목표**: 실제 데이터로 테스트 및 성능 최적화

**작업 내용**:
- 실제 데이터 100명으로 기능 테스트
- 성능 최적화 (캐싱, 지연 로딩)
- 모바일 호환성 확인
- 기존 기능과의 연동 테스트

**핵심 구현**:
```javascript
// 성능 최적화를 위한 캐싱
const filterCache = new Map();

function getCachedFilteredPersons(line, generation) {
    const cacheKey = `${line}-${generation}`;
    
    if (filterCache.has(cacheKey)) {
        return filterCache.get(cacheKey);
    }
    
    const result = getFilteredPersons();
    filterCache.set(cacheKey, result);
    
    return result;
}
```

**완료 기준**:
- ✅ 실제 데이터 100명 테스트 완료
- ✅ 성능 최적화 적용
- ✅ 모바일 호환성 확인
- ✅ 기존 기능 연동 확인

---

## 📅 **개발 일정**

### **총 예상 소요 시간**: 5시간

| 단계 | 작업 내용 | 예상 시간 | 완료 기준 |
|------|-----------|-----------|-----------|
| 4-1 | 패밀리별 보기 화면 설계 | 1시간 | HTML/CSS 완성 |
| 4-2 | 데이터 필터링 로직 구현 | 1시간 30분 | 필터링 로직 완성 |
| 4-3 | 가족 트리 시각화 | 1시간 30분 | 시각화 완성 |
| 4-4 | 통합 테스트 및 최적화 | 1시간 | 테스트 완료 |

### **개발 순서**
1. **4-1**: 화면 설계 → HTML/CSS 구현
2. **4-2**: 필터링 로직 → JavaScript 구현
3. **4-3**: 시각화 → 인터랙션 구현
4. **4-4**: 테스트 → 최적화

---

## 🎯 **성공 기준 및 검증 방법**

### **기능적 요구사항**
- [ ] Line별 탭으로 가족 구성원 분류 표시
- [ ] 세대별 필터로 인물 필터링
- [ ] 상태별 아이콘으로 생존/고인/미확인 구분
- [ ] 인물 클릭 시 상세 정보 화면 이동
- [ ] 실제 데이터 100명 모두 정상 표시

### **성능 요구사항**
- [ ] 페이지 로딩 시간 2초 이내
- [ ] 필터링 응답 시간 0.5초 이내
- [ ] 모바일에서 부드러운 스크롤
- [ ] 터치 인터랙션 반응성

### **사용성 요구사항**
- [ ] 60세 이상도 쉽게 사용 가능
- [ ] 직관적인 네비게이션
- [ ] 명확한 정보 표시
- [ ] 오류 상황 처리

### **검증 방법**
1. **기능 테스트**: 각 필터링 옵션별 결과 확인
2. **성능 테스트**: 페이지 로딩 시간 측정
3. **사용성 테스트**: 실제 사용자(조대표님) 테스트
4. **호환성 테스트**: 다양한 모바일 브라우저 테스트

---

## 🔄 **개발 프로세스**

### **개발 → 시뮬레이션 → 검증 → 실제데이터 테스트 → 디버깅 → 문서화**

1. **개발**: 각 세부 단계별 기능 구현
2. **시뮬레이션**: 샘플 데이터로 기능 테스트
3. **검증**: 코드 품질 및 로직 검증
4. **실제데이터 테스트**: 100명 실제 데이터로 테스트
5. **디버깅**: 발견된 문제점 수정
6. **문서화**: 개발 경과 및 결과 보고서 작성

---

## 📝 **예상 결과물**

### **생성될 파일**
- `app/family.html` - 패밀리별 보기 화면
- `css/family.css` - 패밀리별 보기 스타일
- `js/family.js` - 패밀리별 보기 로직

### **업데이트될 파일**
- `js/app.js` - 메인 화면에서 패밀리별 보기 메뉴 연결

### **기대 효과**
- 가족 구성원을 한눈에 파악 가능
- Line별, 세대별 체계적 분류
- 직관적인 가족 관계 이해
- 모바일에서 편리한 사용성

---

## 🚀 **다음 단계 준비**

### **5단계 예상 기능**
- 정보 내보내기 기능
- 설정 및 관리자 문의
- 데이터 동기화 시스템

### **기술적 준비**
- 4단계 완료 후 5단계 기능 확장 가능
- 패밀리별 보기 기반 추가 분석 기능 구현 가능
- 관계 데이터 기반 고급 기능 개발 가능

---

## 📊 **리스크 관리**

### **주요 리스크**
1. **데이터 한계**: 현재 Line1만 데이터 존재
2. **성능 이슈**: 100명 데이터 처리 성능
3. **모바일 호환성**: 다양한 디바이스 호환성

### **대응 방안**
1. **데이터 확장**: 향후 Line2, Line3 데이터 추가 시 확장 가능한 구조
2. **성능 최적화**: 캐싱, 지연 로딩으로 성능 최적화
3. **호환성 테스트**: 다양한 모바일 브라우저에서 테스트

---

## ✅ **승인 요청 사항**

### **개발 승인**
- [ ] 4단계 개발 계획 승인
- [ ] 개발 일정 (5시간) 승인
- [ ] 기술 구현 방향 승인

### **개발 시작 조건**
- [ ] 조대표님 승인 완료
- [ ] 3-3단계 데이터 검증 완료
- [ ] 개발 환경 준비 완료

---

**계획서 작성 완료일**: 2025년 1월 13일  
**승인 대기**: 조대표님 승인 후 개발 진행  
**다음 단계**: 4단계 패밀리별 보기 기능 개발 시작
