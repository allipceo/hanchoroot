í•œì–‘ì¡°ì”¨ ì¡±ë³´ì•± ë°ì´í„° ìŠ¤í‚¤ë§ˆ v2.0
ì‘ì„±ì¼: 2025.09.12
 ì‘ì„±ì: ë…¸íŒ€ì¥
 ìŠ¹ì¸: ì¡°ëŒ€í‘œ
 ë²„ì „: 2.0 (ë‹¨ìˆœí™” ì ìš©)
 ì£¼ìš” ë³€ê²½: ê¶Œí•œ ê´€ë¦¬ ì œê±° + ì½ê¸° ì „ìš© ìµœì í™”

ğŸ“Š ë°ì´í„° êµ¬ì¡° ê°œìš”
ê¸°ë³¸ ì„¤ê³„ ì›ì¹™ (v2.0)
ì½ê¸° ì „ìš© JSON: ë‹¨ë°©í–¥ ë°ì´í„° í”Œë¡œìš°
ê¶Œí•œ ê´€ë¦¬ ì œê±°: ë³µì¡í•œ canEdit ì‹œìŠ¤í…œ ì‚­ì œ
ëª¨ë°”ì¼ ìµœì í™”: 114ëª… ë°ì´í„° íš¨ìœ¨ì  ë¡œë”©
ê²€ìƒ‰ ìµœì í™”: ë™ëª…ì´ì¸ ì²˜ë¦¬ ë° ì¸ë±ì‹±
ê´€ë¦¬ì ì „ë‹´: ëª¨ë“  ìˆ˜ì •ì€ ë…¸ì…˜ì—ì„œ
ì£¼ìš” ë°ì´í„° ì—”í‹°í‹° (ë‹¨ìˆœí™”)
Person (ê°œì¸ ì •ë³´ - ê¶Œí•œ í•„ë“œ ì œê±°)
SearchIndex (ê²€ìƒ‰ ìµœì í™”)
Config (ì•± ì„¤ì • - ê´€ë¦¬ì ì •ë³´ë§Œ)
Metadata (ë©”íƒ€ ì •ë³´ - ë‹¨ìˆœí™”)

ğŸ‘¤ Person ìŠ¤í‚¤ë§ˆ (v2.0 ë‹¨ìˆœí™”)
ê¸°ë³¸ êµ¬ì¡°
{
  "id": "p_001",
  "name": "ì¡°ì •ìœ¤",
  "gender": "M",
  "generation": 1,
  "line": "common",
  "birthDate": "1852-03-05",
  "deathDate": "1940-06-14",
  "status": "deceased",
  "age": 88,
  "relationships": {
    "father": null,
    "mother": null,
    "spouses": ["p_002", "p_003"],
    "children": ["p_004", "p_005"]
  },
  "contact": {
    "phone": "",
    "email": "", 
    "address": ""
  },
  "additional": {
    "job": "",
    "notes": "í•œì–‘ì¡°ì”¨ ì‹œì¡°",
    "photo": "",
    "burialPlace": "ê²½ê¸°ë„ â—‹â—‹ë¬˜ì›"
  }
  // âŒ permissions í•„ë“œ ì œê±°
  // âŒ canEdit ë°°ì—´ ì œê±°  
  // âŒ lastUpdated, updatedBy ì œê±°
}

í•„ë“œ ìƒì„¸ ì„¤ëª…
ê¸°ë³¸ ì •ë³´
id: ê³ ìœ  ì‹ë³„ì (p_001, p_002...)
name: ì´ë¦„ (í•œê¸€, ê²€ìƒ‰ í‚¤ì›Œë“œ)
gender: ì„±ë³„ (M/F)
generation: ì„¸ëŒ€ (1-6)
line: Line ë¶„ë¥˜ (Line1/Line2/Line3/common)
ìƒì¡´ ì •ë³´
birthDate: ìƒë…„ì›”ì¼ (YYYY-MM-DD ë˜ëŠ” YYYY)
deathDate: ì‚¬ë§ì¼ (nullì´ë©´ ìƒì¡´)
status: ìƒì¡´ìƒíƒœ (living/deceased/unknown)
age: ë‚˜ì´ ë˜ëŠ” í–¥ë…„
ê´€ê³„ ì •ë³´ (ë‹¨ìˆœí™”)
relationships: ê°€ì¡± ê´€ê³„ (ID ì°¸ì¡°ë§Œ)
spouses: ë°°ìš°ì ë°°ì—´ (ì¬í˜¼ ê³ ë ¤)
children: ìë…€ ë°°ì—´ (ID ì°¸ì¡°)

ğŸ” ê²€ìƒ‰ ìµœì í™” ìŠ¤í‚¤ë§ˆ (v2.0)
í†µí•© ê²€ìƒ‰ ì¸ë±ìŠ¤
{
  "searchIndex": {
    "byName": {
      "ì¡°ì •ìœ¤": [
        {
          "id": "p_001",
          "generation": 1,
          "line": "common", 
          "distinguisher": "ì‹œì¡°"
        }
      ],
      "ì¡°ìœ¤í¬": [
        {
          "id": "p_023",
          "generation": 5,
          "line": "Line1",
          "father": "ì¡°ì„±ë¬¸",
          "spouse": "ì„ì¤€ì„±",
          "birthYear": 1985
        },
        {
          "id": "p_045", 
          "generation": 5,
          "line": "Line2",
          "father": "ì¡°ì„±ìš©",
          "spouse": "ì–‘ì¢…ì›", 
          "birthYear": 1987
        },
        {
          "id": "p_067",
          "generation": 5,
          "line": "Line2",
          "father": "ì¡°ì„±ìš©", 
          "spouse": "ì–‘ì¢…ì›",
          "birthYear": 1987
        }
      ]
    },
    "byGeneration": {
      "1": ["p_001", "p_002", "p_003"],
      "2": ["p_004", "p_005", "p_006", "p_007", "p_008"],
      "3": ["p_009", "p_010", "p_011", "p_012", "p_013", "p_014", "p_015", "p_016", "p_017", "p_018", "p_019", "p_020"],
      "4": ["p_021", "p_022", "..."],
      "5": ["p_066", "p_067", "..."],
      "6": ["p_110", "p_111", "p_112", "p_113", "p_114"]
    },
    "byLine": {
      "Line1": ["p_004", "p_006", "p_009", "p_010", "..."],
      "Line2": ["p_004", "p_007", "p_013", "p_014", "..."],
      "Line3": ["p_005", "p_008", "p_017", "p_018", "..."],
      "common": ["p_001", "p_002", "p_003"]
    },
    "byStatus": {
      "living": ["p_020", "p_021", "p_066", "..."],
      "deceased": ["p_001", "p_002", "p_003", "..."],
      "unknown": ["p_089", "p_090"]
    }
  }
}

ì´Œìˆ˜ ê³„ì‚° ë§¤íŠ¸ë¦­ìŠ¤ (ì‚¬ì „ ê³„ì‚°)
{
  "kinshipMatrix": {
    "p_001": {
      "p_002": {"degree": 1, "relation": "spouse", "title": "ë¶€ì¸"},
      "p_004": {"degree": 1, "relation": "son", "title": "ì•„ë“¤"},
      "p_009": {"degree": 2, "relation": "grandson", "title": "ì†ì"}
    },
    "p_004": {
      "p_001": {"degree": 1, "relation": "father", "title": "ì•„ë²„ì§€"},
      "p_009": {"degree": 1, "relation": "son", "title": "ì•„ë“¤"},
      "p_005": {"degree": 2, "relation": "brother", "title": "í˜•ì œ"}
    }
  }
}


âš™ï¸ ì•± ì„¤ì • ìŠ¤í‚¤ë§ˆ (v2.0 ë‹¨ìˆœí™”)
config.json
{
  "app": {
    "version": "1.0.0",
    "dataVersion": "v2.0",
    "lastUpdate": "2025-09-12T15:30:00Z"
  },
  "admin": {
    "name": "ì¡°ëŒ€í‘œ",
    "phone": "010-1234-5678",
    "email": "admin@hanyang.com"
  },
  "settings": {
    "defaultLine": "Line1",
    "maxExportSize": 100,
    "cacheTimeout": 3600
  }
  // âŒ ë³µì¡í•œ ê¶Œí•œ ê´€ë¦¬ ì œê±°
  // âŒ password í•„ë“œ ì œê±°
  // âŒ secondary admin ì œê±° (í•„ìš”ì‹œ ë‚˜ì¤‘ì— ì¶”ê°€)
}


ğŸ“± ëª¨ë°”ì¼ ìµœì í™” (v2.0)
ë°ì´í„° ë¶„í•  ì „ëµ
core.js (í•„ìˆ˜ ë°ì´í„°, ~25KB)
const coreData = {
  persons: [
    // 1-3ì„¸ëŒ€ ê¸°ë³¸ ì •ë³´ (23ëª…)
  ],
  searchIndex: {
    byName: { /* ì „ì²´ ì´ë¦„ ì¸ë±ìŠ¤ */ },
    byGeneration: { /* ì„¸ëŒ€ë³„ ID ë°°ì—´ */ }
  },
  kinshipMatrix: {
    // í•µì‹¬ ê´€ê³„ë§Œ (1-3ì„¸ëŒ€)
  },
  config: { /* ì•± ì„¤ì • */ }
};

extended.js (í™•ì¥ ë°ì´í„°, ~35KB)
const extendedData = {
  persons: [
    // 4-6ì„¸ëŒ€ ìƒì„¸ ì •ë³´ (91ëª…)
  ],
  fullKinshipMatrix: {
    // ì „ì²´ ì´Œìˆ˜ ê´€ê³„
  },
  contactDetails: {
    // ì—°ë½ì²˜ ìƒì„¸ ì •ë³´
  }
};

ì§€ì—° ë¡œë”© êµ¬í˜„
class DataLoader {
  constructor() {
    this.coreLoaded = false;
    this.extendedLoaded = false;
  }
  
  async loadCore() {
    if (!this.coreLoaded) {
      const response = await fetch('data/core.js');
      this.coreData = await response.json();
      this.coreLoaded = true;
    }
    return this.coreData;
  }
  
  async loadExtended() {
    if (!this.extendedLoaded) {
      const response = await fetch('data/extended.js');
      this.extendedData = await response.json(); 
      this.extendedLoaded = true;
    }
    return this.extendedData;
  }
  
  // í•„ìš”ì— ë”°ë¼ ë°ì´í„° ë¡œë“œ
  async getPerson(id) {
    if (id.startsWith('p_001') || id.startsWith('p_002') || id.startsWith('p_003')) {
      const core = await this.loadCore();
      return core.persons.find(p => p.id === id);
    } else {
      const extended = await this.loadExtended();
      return extended.persons.find(p => p.id === id);
    }
  }
}


ğŸ”„ ë…¸ì…˜ â†’ JSON ë³€í™˜ í”„ë¡œì„¸ìŠ¤ (v2.0)
ë‹¨ìˆœí™”ëœ ë³€í™˜ ë§¤í•‘
ë…¸ì…˜ í•„ë“œ
JSON í•„ë“œ
ë³€í™˜ ê·œì¹™
ì´ë¦„
name
ì§ì ‘ ë§¤í•‘
ì„±ë³„
gender
ìë™ ì¶”ë¡  (ì¡°ì”¨=M, ê¸°íƒ€=F)
ìƒë…„
birthDate
YYYY ë˜ëŠ” YYYY-MM-DD
ì„¸ëŒ€
generation
ìˆ«ì ë³€í™˜
Line
line
ë¬¸ìì—´ (Line1/Line2/Line3/common)
ë°°ìš°ì
spouses
ë°°ì—´ ë³€í™˜
ì•„ë²„ì§€
relationships.father
ID ì°¸ì¡°
ì–´ë¨¸ë‹ˆ
relationships.mother
ID ì°¸ì¡°

ë³€í™˜ ìŠ¤í¬ë¦½íŠ¸ (ë‹¨ìˆœí™”)
function convertNotionToJSON(notionData) {
  const persons = [];
  const searchIndex = {
    byName: {},
    byGeneration: {},
    byLine: {},
    byStatus: {}
  };
  
  // 1ë‹¨ê³„: ê°œì¸ ì •ë³´ ë³€í™˜ (ê¶Œí•œ í•„ë“œ ì œì™¸)
  notionData.forEach(person => {
    const jsonPerson = {
      id: generateId(person.ì´ë¦„, person.ì„¸ëŒ€),
      name: person.ì´ë¦„,
      gender: determineGender(person.ì´ë¦„),
      generation: person.ì„¸ëŒ€,
      line: person.Line || 'common',
      birthDate: convertDate(person.ìƒë…„),
      deathDate: person.ì‚¬ë§ì¼ || null,
      status: determineStatus(person),
      relationships: buildRelationships(person),
      contact: {
        phone: person.ì—°ë½ì²˜ || '',
        email: person.ì´ë©”ì¼ || '',
        address: person.ì£¼ì†Œ || ''
      }
      // âŒ permissions í•„ë“œ ì œê±°
    };
    persons.push(jsonPerson);
  });
  
  // 2ë‹¨ê³„: ê²€ìƒ‰ ì¸ë±ìŠ¤ ìƒì„±
  buildSearchIndex(persons, searchIndex);
  
  // 3ë‹¨ê³„: ì´Œìˆ˜ ë§¤íŠ¸ë¦­ìŠ¤ ìƒì„±
  const kinshipMatrix = buildKinshipMatrix(persons);
  
  return {
    persons,
    searchIndex,
    kinshipMatrix,
    metadata: {
      totalCount: persons.length,
      generatedAt: new Date().toISOString(),
      version: '2.0'
    }
  };
}

// ì„±ë³„ ìë™ ì¶”ë¡  (ë‹¨ìˆœí™”)
function determineGender(name) {
  return name.startsWith('ì¡°') ? 'M' : 'F';
}

// ìƒì¡´ ìƒíƒœ ì¶”ë¡ 
function determineStatus(person) {
  if (person.ì‚¬ë§ì¼) return 'deceased';
  if (person.ì„¸ëŒ€ <= 2) return 'deceased'; // 1-2ì„¸ëŒ€ëŠ” ëŒ€ë¶€ë¶„ ê³ ì¸
  if (person.ì„¸ëŒ€ >= 5) return 'living';   // 5-6ì„¸ëŒ€ëŠ” ëŒ€ë¶€ë¶„ ìƒì¡´
  return 'unknown'; // 3-4ì„¸ëŒ€ëŠ” ê°œë³„ í™•ì¸ í•„ìš”
}


ğŸš€ ì„±ëŠ¥ ìµœì í™” (v2.0)
ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
Core ë°ì´í„°: ~25KB (1-3ì„¸ëŒ€ + ê²€ìƒ‰ ì¸ë±ìŠ¤)
Extended ë°ì´í„°: ~35KB (4-6ì„¸ëŒ€ + ìƒì„¸ ì •ë³´)
Total ìµœëŒ€: ~60KB (ë§¤ìš° íš¨ìœ¨ì )
ê²€ìƒ‰ ì„±ëŠ¥
ì´ë¦„ ê²€ìƒ‰: O(1) - ì‚¬ì „ êµ¬ì¶•ëœ í•´ì‹œ ì¸ë±ìŠ¤
ì„¸ëŒ€ë³„ í•„í„°: O(1) - ë°°ì—´ ì§ì ‘ ì ‘ê·¼
ì´Œìˆ˜ ê³„ì‚°: O(1) - ì‚¬ì „ ê³„ì‚°ëœ ë§¤íŠ¸ë¦­ìŠ¤
ë™ëª…ì´ì¸ ì²˜ë¦¬: O(1) - ì¸ë±ìŠ¤ì—ì„œ ì¦‰ì‹œ êµ¬ë³„ ì •ë³´ ì œê³µ
ìºì‹± ì „ëµ
// ë¸Œë¼ìš°ì € ìºì‹œ í™œìš©
const CACHE_KEYS = {
  CORE_DATA: 'hanyang_core_v2.0',
  EXTENDED_DATA: 'hanyang_extended_v2.0',
  USER_PREFERENCES: 'hanyang_user_prefs'
};

class CacheManager {
  static setCore(data) {
    localStorage.setItem(CACHE_KEYS.CORE_DATA, JSON.stringify(data));
  }
  
  static getCore() {
    const cached = localStorage.getItem(CACHE_KEYS.CORE_DATA);
    return cached ? JSON.parse(cached) : null;
  }
  
  static clearAll() {
    Object.values(CACHE_KEYS).forEach(key => {
      localStorage.removeItem(key);
    });
  }
}


ğŸ”’ ë°ì´í„° ë¬´ê²°ì„± (v2.0)
ID ìƒì„± ê·œì¹™
function generateId(name, generation) {
  // p_001, p_002, ... p_114 í˜•ì‹
  const index = getGlobalIndex(name, generation);
  return `p_${index.toString().padStart(3, '0')}`;
}

ê´€ê³„ ê²€ì¦
function validateRelationships(persons) {
  persons.forEach(person => {
    // ë¶€ëª¨-ìë…€ ê´€ê³„ ì¼ê´€ì„± ê²€ì¦
    if (person.relationships.father) {
      const father = persons.find(p => p.id === person.relationships.father);
      if (!father.relationships.children.includes(person.id)) {
        console.warn(`ê´€ê³„ ë¶ˆì¼ì¹˜: ${person.name} - ${father.name}`);
      }
    }
  });
}

ë°ì´í„° ë°±ì—…
// JSON ìƒì„± ì‹œ ìë™ ë°±ì—…
function generateJSONWithBackup(data) {
  const timestamp = new Date().toISOString().split('T')[0];
  const backupData = {
    ...data,
    backupInfo: {
      createdAt: timestamp,
      source: 'notion_database',
      version: '2.0'
    }
  };
  
  // GitHubì— ë°±ì—… íŒŒì¼ë„ í•¨ê»˜ ì €ì¥
  return {
    main: data,
    backup: backupData
  };
}


ğŸ“‹ ì‹¤ì œ ë°ì´í„° êµ¬ì¡° ì˜ˆì‹œ
1ì„¸ëŒ€ ì¡°ì •ìœ¤ ë°ì´í„°
{
  "id": "p_001",
  "name": "ì¡°ì •ìœ¤", 
  "gender": "M",
  "generation": 1,
  "line": "common",
  "birthDate": "1852-03-05",
  "deathDate": "1940-06-14",
  "status": "deceased",
  "age": 88,
  "relationships": {
    "father": null,
    "mother": null, 
    "spouses": ["p_002", "p_003"],
    "children": ["p_004", "p_005"]
  },
  "contact": {
    "phone": "",
    "email": "",
    "address": ""
  },
  "additional": {
    "job": "",
    "notes": "í•œì–‘ì¡°ì”¨ ì‹œì¡°, 1852ë…„ ì¶œìƒ",
    "photo": "",
    "burialPlace": "ê²½ê¸°ë„ â—‹â—‹ë¬˜ì›"
  }
}

5ì„¸ëŒ€ ì¡°ìœ¤í¬ (ë™ëª…ì´ì¸) ë°ì´í„°
[
  {
    "id": "p_023",
    "name": "ì¡°ìœ¤í¬",
    "gender": "F", 
    "generation": 5,
    "line": "Line1",
    "birthDate": "1985",
    "deathDate": null,
    "status": "living",
    "relationships": {
      "father": "p_015",
      "mother": "p_016",
      "spouses": ["p_024"],
      "children": ["p_025", "p_026"]
    }
  },
  {
    "id": "p_045",
    "name": "ì¡°ìœ¤í¬", 
    "gender": "F",
    "generation": 5,
    "line": "Line2",
    "birthDate": "1987",
    "deathDate": null, 
    "status": "living",
    "relationships": {
      "father": "p_030",
      "mother": "p_031",
      "spouses": ["p_046"],
      "children": []
    }
  }
]


ğŸ¯ v2.0ì˜ í•µì‹¬ ê°œì„ ì‚¬í•­
ë‹¨ìˆœí™”ë¡œ ì¸í•œ ì´ì 
âœ… ê¶Œí•œ ê´€ë¦¬ ë³µì¡ì„± ì œê±°
âœ… ë°ì´í„° êµ¬ì¡° ë‹¨ìˆœí™”
âœ… ì„±ëŠ¥ ìµœì í™” ê·¹ëŒ€í™”
âœ… ê°œë°œ ë° ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±
ê¸°ëŠ¥ì„± ìœ ì§€
âœ… ë™ëª…ì´ì¸ ì™„ë²½ ì²˜ë¦¬
âœ… ìƒì¡´ ì—¬ë¶€ ì •í™• í‘œì‹œ
âœ… ì´Œìˆ˜ ê³„ì‚° ìµœì í™”
âœ… ê²€ìƒ‰ ì„±ëŠ¥ ê·¹ëŒ€í™”
ë¬¸ì„œ ìŠ¹ì¸: ì¡°ëŒ€í‘œ
 v2.0 í•µì‹¬: ë‹¨ìˆœí™”ë¥¼ í†µí•œ ì•ˆì •ì„±ê³¼ ì„±ëŠ¥ ê·¹ëŒ€í™”
 ë‹¤ìŒ ë‹¨ê³„: ì‹¤ì œ ë…¸ì…˜ ë°ì´í„°ë¥¼ v2.0 ìŠ¤í‚¤ë§ˆë¡œ ë³€í™˜
009_
